# üöá BSS (Best Safety Subway) üöá
- ÏïàÏ†ÑÌïòÍ≥† Íπ®ÎÅóÌïú ÏßÄÌïòÏ≤† ÌÉëÏäπ Î∞è Ïö¥Ìñâ GABOZAGO ~

### üõéÔ∏è 2Ï°∞Ïùò Í∑úÏπô
**1Ô∏è‚É£ commit message** 

```c
‚ûï[Feat] : Í∏∞Îä• Ï∂îÍ∞Ä
üöÄ[Chore] : Ïã§Ìñâ ÌååÏùº Î∞è ÏàòÏ†ï Ïãú 
üöß[Refactor] : ÏΩîÎìú ÏàòÏ†ï (Î¶¨Ìå©ÌÜ†ÎßÅ)
üìÉ[Memo] : Ï£ºÏÑù ÏàòÏ†ï
üö®[Alert] : Í∏∞Îä• Ïò§Î•ò Ïãú
```

**2Ô∏è‚É£ ÍπÉÌóàÎ∏å push Ïãú üö® ÏïåÎ¶¨Í∏∞ (Ï∂©Îèå Î∞úÏÉù!! Pull ÌïòÍ≥† ÏàòÏ†ïÌïòÏÑ∏Ïöî!!)**

**3Ô∏è‚É£ 1Ïùº 1 issue ÏûëÏÑ±**

**4Ô∏è‚É£ dev branch Ïóê 1Ï∞® Merge, main branch Ïóê ÏµúÏ¢Ö Merge**

# üöá ÌîÑÎ°úÏ†ùÌä∏ üöá

**üö© BSS (Best Safety Subway)**

- **ÎπÑÏ¶àÎãàÏä§ ÏßÄÏõê ÏãúÏä§ÌÖú BSS (Business Support System) :** ÌÜµÏã† Ï°∞ÏßÅÏù¥ Î™®Îì† Í≥†Í∞ù ÎåÄÎ©¥ ÌôúÎèôÏùÑ Í¥ÄÎ¶¨ÌïòÍ≥† Í∞ÑÏÜåÌôîÌïòÎäî Îç∞ ÎèÑÏõÄÏù¥ ÎêòÎäî Îã§ÏñëÌïú ÏÜåÌîÑÌä∏Ïõ®Ïñ¥ ÌîÑÎ°úÍ∑∏Îû®
- ÏïàÏ†ÑÌïòÍ≥† Íπ®ÎÅóÌïú ÏßÄÌïòÏ≤† ÌÉëÏäπ Î∞è Ïö¥Ìñâ ~ !

**üö© Ï∂îÏßÑ Î∞∞Í≤Ω Î∞è ÌïÑÏöîÏÑ±**

- ÏûêÏÇ¥ Î∞è ÏÇ¨Í≥† ÎπàÎ≤àÌïòÍ≤å ÏùºÏñ¥ÎÇ®
- Ïä§ÌÅ¨Î¶∞ ÎèÑÏñ¥ Í≥†Ïû• Î¨∏Ï†ú
- Ï∂úÌá¥Í∑º ÏïïÏÇ¨ ÏÇ¨Í≥† ÏúÑÌóò ÎÜíÏùå
    - Í∞ÑÏ†ëÏ†ÅÏúºÎ°ú Ïù¥ÏÇ∞ÌôîÌÉÑÏÜå Í≥ºÌè¨Ìôî ÏãúÍ∞ÅÌôîÎ°ú ‚ÄúÏúÑÌóò‚Äù ÏùòÏãù Ï†ÑÎã¨

**üö© ÏÑúÎπÑÏä§ ÎÇ¥Ïö©**

1. ÏßÄÌïòÏ≤† Ïó≠
  - ÏßÄÌïòÏ≤† Í∏∞Í¥ÄÏÇ¨ÏóêÍ≤å ÏúÑÍ∏â ÏÉÅÌô© Î∞è Î∞©Ìï¥Î¨º Í∞êÏßÄ ÏïåÎ¶¨Í∏∞
      - MQTT ÌÜµÏã†ÏúºÎ°ú ÏïåÎ¶º
      - Î™á Î≤à Ï∂úÏûÖÎ¨∏Ïù∏ÏßÄ ÏïåÎ¶º
      - Ï¥àÎ°ùÏÉâ ÎÖ∏ÎûÄÏÉâ Îπ®Í∞ÑÏÉâÏúºÎ°ú ÍΩâ Ï∞®ÏûàÏúºÎ©¥ Ïù¥ÏÇ∞ÌôîÌÉÑÏÜå Í≥ºÌè¨ÌôîÎ°ú, ÏÇ¨ÎûåÎì§Ïù¥ Î¨¥ÏÑúÏõåÏÑú Ïïà ÌÉà Í≤ÉÏûÑ
  - Ï†ïÏ∞®Ïó≠Ïóê Ï¥àÏùåÌåå ÎùºÏù¥Îçî ÏÑºÏÑúÎ°ú Î∞©Ìï¥Î¨º Í∞êÏßÄ
  - Ï†ïÏ∞®Ïó≠Ïóê Ïä§ÌÅ¨Î¶∞ ÎèÑÏñ¥ Ïó¥Î¶¥ Ïãú ÏúÑÍ∏â ÏÉÅÌô© ÏïåÎ¶º

2. ÏßÄÌïòÏ≤† ÎÇ¥
    - ÏÇ∞ÏÜå Ìè¨Ìôî ÎÜçÎèÑÎ•º ÏßÄÌïòÏ≤† ÎÇ¥Î∂Ä Ïó≠ ÌåêÎÑ¨Ïóê ÌëúÏãú

**üö© Í∞úÎ∞ú ÏãúÏä§ÌÖú ÌôòÍ≤Ω**

**‚òëÔ∏è Í∞úÎ∞ú ÌôòÍ≤Ω**

- Linux

**‚òëÔ∏è ÏÜåÏöî ÏûêÏõê**

- Arduino UNO R4 WIFI
- MQ-135 ÏïÑÎëêÏù¥ÎÖ∏ Ïú†Ìï¥Í∞ÄÏä§/Í≥µÍ∏∞Ïßà ÏÑºÏÑú Î™®Îìà x 3
    - NH3, NOx, ÏïåÏΩîÏò¨, Î≤§Ï††, Ïó∞Í∏∞ Î∞è CO2Î•º Ìè¨Ìï®Ìïú Í¥ëÎ≤îÏúÑÌïú Í∞ÄÏä§Î•º Í∞êÏßÄ
- Ï¥àÏùåÌåå ÏÑºÏÑú x 2
    - Ïä§ÌÅ¨Î¶∞ ÎèÑÏñ¥ ÏÇ¨Ïù¥Ïóê ÌïòÎÇòÏî© ÎÜìÍ≥† ÏôºÏ™Ω or Ïò§Î•∏Ï™Ω Í∞êÏßÄ
- RGB LED
- LCD x 2
- BUTTON x 2
- ÌîÑÎ°úÌÜ†ÌÉÄÏûÖ
    - Ïä§ÌÅ¨Î¶∞ ÎèÑÏñ¥ x 2
    - ( Í∞Å Ïä§ÌÅ¨Î¶∞ ÎèÑÏñ¥ ÏÇ¨Ïù¥Ïóê¬†**Ï¥àÏùåÌåå ÏÑºÏÑú**¬†) X 2
    - ( Í∞Å Ïä§ÌÅ¨Î¶∞ Í≥†Ïû• Ïú†Î¨¥Î•º ÏïåÎ†§Ï£ºÎäî ÏûÑÏãú¬†**Î≤ÑÌäº¬†ÏÑºÏÑú**¬†) X 2
    - ( Í∞Å ÏßÄÌïòÏ≤† Ïπ∏ÎßàÎã§ Ïú†Ìï¥Í∞ÄÏä§/Í≥µÍ∏∞Ïßà ÏÑºÏÑú ) X 3
    - Í∞Å Ïä§ÌÅ¨Î¶∞ ÎèÑÏñ¥Ïùò¬†**LCD ÌåêÎÑ¨**¬†&¬†**LED**

**‚òëÔ∏è Ïú†Ïä§ÌéòÏù¥Ïä§** 

**‚òëÔ∏è Í∏∞Ïà†**

- **MQTT ÌÜµÏã†**
    - Ïû•Ïï†Î¨º Í∞êÏßÄ & Ïä§ÌÅ¨Î¶∞ ÎèÑÏñ¥ Í≥†Ïû• ‚Üí Í∏∞Í¥ÄÏÇ¨Ïóê ÏïåÎ¶º
- **FreeRTOS**
    - **‚≠ê RTOS Ïã§ÏãúÍ∞Ñ(Real Time)**
        - Ïö¥ÏòÅÏ≤¥Ï†ú(Operating System)Ïùò ÏïΩÏûê
        - Ï†úÌïúÎêú ÏãúÍ∞ÑÎÇ¥Ïóê ÏõêÌïòÎäî ÏûëÏóÖÏùÑ Î™®Îëê Ï≤òÎ¶¨ÌïòÎäîÍ≤ÉÏùÑ Î≥¥Ïû•ÌïòÎäî Ïö¥ÏòÅÏ≤¥Ï†ú
        - Î©ÄÌã∞ÌÉúÏä§ÌÇπ ÌôòÍ≤ΩÏóêÏÑú Task Ï≤òÎ¶¨ÏãúÍ∞ÑÏùÑ ÏùºÍ¥ÄÎêòÍ≤å Ïú†ÏßÄÌïòÍ∏∞ ÏúÑÌïú Ïö©ÎèÑÎ°ú ÏÇ¨Ïö©
        - ÏãúÎ∂ÑÌï† ÏãúÏä§ÌÖú ÌïòÏóêÏÑú Ïö∞ÏÑ†ÏàúÏúÑ Í∏∞Î∞ò Ïä§ÏºÄÏ§ÑÎßÅÏùÑ ÌÜµÌï¥ Ïö∞ÏÑ†ÏàúÏúÑÍ∞Ä ÎÜíÏùÄ taskÍ∞Ä Î®ºÏ†Ä ÏûëÏóÖÏùÑ Ï≤òÎ¶¨Ìï† Ïàò ÏûàÍ≤å Ìï®
    - **üå≥ ÌÉúÏä§ÌÅ¨ (Task)**
        - 1Ô∏è‚É£ Í∞Å taskÏóêÎäî Ïö∞ÏÑ†ÏàúÏúÑÎ•º Ìï†ÎãπÌïòÎ©∞ Ïà´ÏûêÍ∞Ä ÎÜíÏùÑÏàòÎ°ù ÌÅ∞ Ïö∞ÏÑ†ÏàúÏúÑÎ•º ÏùòÎØ∏ÌïúÎã§. Ïö∞ÏÑ†ÏàúÏúÑÎäî 0Î∂ÄÌÑ∞ configMAX_PRIORITIESÍπåÏßÄ Ìï†ÎãπÏù¥ Í∞ÄÎä•ÌïòÎã§. Ïö∞ÏÑ†ÏàúÏúÑÍ∞Ä ÎÜíÏùÄ taskÎäî ÎÇÆÏùÄ taskÎ•º ÏÑ†Ï†ê(preemption)Ìï† Ïàò ÏûàÍ≥†, Ïù¥Îïå context switchingÏù¥ Î∞úÏÉù ÎèôÏùºÌïú Ïö∞ÏÑ†ÏàúÏúÑ ÏÇ¨Ïù¥ÏóêÏÑúÎäî round robinÏùÑ ÏÇ¨Ïö©
        - 2Ô∏è‚É£ TaskÎäî return valueÍ∞Ä ÏóÜÏúºÎ©∞ (void*) ÌÉÄÏûÖÏúºÎ°ú Ïó¨Îü¨ ÏûêÎ£åÌòïÏùÑ Îß§Í∞úÎ≥ÄÏàòÎ°ú Î∞õÏùÑ Ïàò ÏûàÎã§
        - 3Ô∏è‚É£ TaskÎäî ÏùºÌöåÏö© taskÏôÄ Ï£ºÍ∏∞Ï†Å task 2Í∞ÄÏßÄ Ï¢ÖÎ•ò

**üö© ÏÇ¨Ïö©Ïûê Ïù∏ÌÑ∞ÌéòÏù¥Ïä§**
![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fcf2rad%2FbtsCwhQs9Uz%2FQmtKogezVezssZPKNdfyB1%2Fimg.png)

**üö© Í∞úÎ∞ú ÏùºÏ†ï**
![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FW1lsm%2FbtsCtmyabfL%2FQnsuZoKGBpFjqX1IvDmhg1%2Fimg.png)


**üö© Í¥ÄÎ†® ÎßÅÌÅ¨**

- [GitHub - Johannes4Linux/libmosquitto_examples: Some examples about how to use libmosquitto](https://github.com/Johannes4Linux/libmosquitto_examples)
- [GitHub - knolleary/pubsubclient: A client library for the Arduino Ethernet Shield that provides support for MQTT.](https://github.com/knolleary/pubsubclient/tree/master)
- [ESP8266Í≥º MQTT ÌÜµÏã† ÏÇ¨Ïö©Ìï¥Î≥¥Í∏∞](https://blog.naver.com/roboholic84/221232207387)
- [MQ-135 ÏïÑÎëêÏù¥ÎÖ∏ Ïú†Ìï¥Í∞ÄÏä§/Í≥µÍ∏∞Ïßà ÏÑºÏÑú Î™®Îìà [SZH-SSBH-038]](https://www.devicemart.co.kr/goods/view?no=1327411)
- [FreeRTOS ÏÇ¨Ïö©ÌïòÍ∏∞](https://blog.naver.com/005334337/220725214276)
- [[FreeRTOS] 7. ÌÉúÏä§ÌÅ¨ Í¥ÄÎ†® API Ïª§ÎÑê](https://velog.io/@psh4204/FreeRTOS-7.-%ED%83%9C%EC%8A%A4%ED%81%AC-%EA%B4%80%EB%A0%A8-API-%EC%BB%A4%EB%84%90)


**üö© Ïã§ÌñâÎ∞©Î≤ï**
- Arduino/subway_inside/subway_inside.ino
- Arduino/subway_outside/subway_outside.ino
- DB/main.c
    - gcc -g -o main main.c -lpaho-mqtt3c -lsqlite3

**üö© DEMO**
- YOUTUBE -> https://youtu.be/z0vN7ogobQA
- üöâ Station
![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FWEstZ%2FbtsCoIbKPuj%2FYNKrCbCrDdHIDXhOPki8C0%2Fimg.png)
![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2F4wv8D%2FbtsCt4c1cJe%2FUJdUhDEduKjVeOPqcjt9gk%2Fimg.png)

- üöã Subway
![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbikoRz%2FbtsCtpPeLT9%2FsJdEmwUvsNrZRyn6HBeGvK%2Fimg.png)
![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FblzNX6%2FbtsCtbpU01P%2FOxKSA60yN2RHz8UndlBqSk%2Fimg.png)

- üìî DB
![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FD4IXQ%2FbtsCoAEJgOT%2FBqNRvvGT4ozAjtLnlYnQmk%2Fimg.png)
![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FmaNW9%2FbtsCtov3Bf1%2F4HYkdQckRn0ajU0ZkRmxz1%2Fimg.png)

- üßë‚ÄçüéÑ ÏôÑÏÑ±Î≥∏
![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcAVvEh%2FbtsCrayAzrj%2FFQ6leY6DORuhrOYb8xQWS0%2Fimg.png)
![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FQVAJO%2FbtsCt5Xh8DY%2FekvxcX8e1jIvyr9dxcdlT0%2Fimg.png)


